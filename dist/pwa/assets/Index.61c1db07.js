import{f as u,c as P,$ as oe,a0 as te,r as f,d as y,M as w,h as ne,t as se,g as Y,am as G,J as H,k as v,m as C,n,s as _,p as l,Q as A,N as B,aA as R,aB as D,av as z,q as L,at as U,a3 as j}from"./index.6986e83f.js";import{g as Z,l as ie,h as ee,m as re,u as ce,Q as ue,o as J,d as de,b as W,c as q,e as X,k as M,K as T,L as S}from"./use-quasar.e924c61d.js";import{o as ve,u as fe,a as me,b as ge,c as be,d as ye,Q as he}from"./QTable.e6c790ce.js";import{api as Q}from"./axios.ad4ec065.js";import"./QTr.386ac4d0.js";import"./ClosePopup.60b40675.js";import"./scroll.f63e12c0.js";const pe=u("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[u("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),u("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var ke=P({name:"QRadio",props:{...Z,...oe,...ie,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:c,emit:d}){const{proxy:h}=Y(),m=ee(e,h.$q),p=te(e,ve),x=f(null),{refocusTargetEl:s,refocusTarget:k}=fe(e,x),r=y(()=>G(e.modelValue)===G(e.val)),o=y(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(m.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),g=y(()=>{const a=e.color!==void 0&&(e.keepColor===!0||r.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${r.value===!0?"truthy":"falsy"}${a}`}),V=y(()=>(r.value===!0?e.checkedIcon:e.uncheckedIcon)||null),$=y(()=>e.disable===!0?-1:e.tabindex||0),N=y(()=>{const a={type:"radio"};return e.name!==void 0&&Object.assign(a,{".checked":r.value===!0,"^checked":r.value===!0?"checked":void 0,name:e.name,value:e.val}),a}),O=re(N);function I(a){a!==void 0&&(H(a),k(a)),e.disable!==!0&&r.value!==!0&&d("update:modelValue",e.val,a)}function E(a){(a.keyCode===13||a.keyCode===32)&&H(a)}function K(a){(a.keyCode===13||a.keyCode===32)&&I(a)}return Object.assign(h,{set:I}),()=>{const a=V.value!==null?[u("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[u(w,{class:"q-radio__icon",name:V.value})])]:[pe];e.disable!==!0&&O(a,"unshift"," q-radio__native q-ma-none q-pa-none");const t=[u("div",{class:g.value,style:p.value,"aria-hidden":"true"},a)];s.value!==null&&t.push(s.value);const i=e.label!==void 0?ne(c.default,[e.label]):se(c.default);return i!==void 0&&t.push(u("div",{class:"q-radio__label q-anchor--skip"},i)),u("div",{ref:x,class:o.value,tabindex:$.value,role:"radio","aria-label":e.label,"aria-checked":r.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:I,onKeydown:E,onKeyup:K},t)}}}),_e=P({name:"QToggle",props:{...me,icon:String,iconColor:String},emits:ge,setup(e){function c(d,h){const m=y(()=>(d.value===!0?e.checkedIcon:h.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),p=y(()=>d.value===!0?e.iconColor:null);return()=>[u("div",{class:"q-toggle__track"}),u("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},m.value!==void 0?[u(w,{name:m.value,color:p.value})]:void 0)]}return be("toggle",c)}});const ae={radio:ke,checkbox:ye,toggle:_e},xe=Object.keys(ae);var Ce=P({name:"QOptionGroup",props:{...Z,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(c=>"value"in c&&"label"in c)},name:String,type:{default:"radio",validator:e=>xe.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:c,slots:d}){const{proxy:{$q:h}}=Y(),m=Array.isArray(e.modelValue);e.type==="radio"?m===!0&&console.error("q-option-group: model should not be array"):m===!1&&console.error("q-option-group: model should be array in your case");const p=ee(e,h),x=y(()=>ae[e.type]),s=y(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),k=y(()=>{const o={role:"group"};return e.type==="radio"&&(o.role="radiogroup",e.disable===!0&&(o["aria-disabled"]="true")),o});function r(o){c("update:modelValue",o)}return()=>u("div",{class:s.value,...k.value},e.options.map((o,g)=>{const V=d["label-"+g]!==void 0?()=>d["label-"+g](o):d.label!==void 0?()=>d.label(o):void 0;return u("div",[u(x.value,{modelValue:e.modelValue,val:o.value,name:o.name===void 0?e.name:o.name,disable:e.disable||o.disable,label:V===void 0?o.label:null,leftLabel:o.leftLabel===void 0?e.leftLabel:o.leftLabel,color:o.color===void 0?e.color:o.color,checkedIcon:o.checkedIcon,uncheckedIcon:o.uncheckedIcon,dark:o.dark||p.value,size:o.size===void 0?e.size:o.size,dense:e.dense,keepColor:o.keepColor===void 0?e.keepColor:o.keepColor,"onUpdate:modelValue":r},V)])}))}});const qe=u("div",{class:"q-space"});var Se=P({name:"QSpace",setup(){return()=>qe}});const Ve=_("div",{class:"text-center text-h4"}," Reporte de Asistencias",-1),we={class:"q-pa-sm q-gutter-sm flex justify-center"},Qe=_("div",{class:""},"Reporte de Asistencias",-1),Ie=_("div",{class:"text-h6"},"Con Conexion",-1),Ae=_("div",{class:"text-h6"},"Sin Conexion",-1),Be=_("div",{class:"text-h6"},"Correctos",-1),Re=_("div",{class:"text-h6"},"Errores",-1),Pe={__name:"Index",setup(e){const c=ce(),d=f(!1),h=f(!1),m=f(!1),p=f(!1),x=f(!1),s=f(!1),k=f({state:!1,body:null}),r=f({state:!1,body:null});f({state:!1,body:null});const o=f({reporte:[],filter:null}),g=f({opts:[],val:"All"});f();const V=y(()=>g.value.val==="All"?o.value.reporte:o.value.reporte.filter(a=>a.SUCURSAL==g.value.val)),$=()=>{console.log("Descargando Archivo");const a=new Date,t=a.getDate()+"-"+(a.getMonth()+1);d.value=!0,s.value=!0;const i=c.notify({type:"ongoing",message:"Descargando Reporte...",position:"center"});Q.get("/assist/report",{responseType:"blob"}).then(b=>{const le=window.URL.createObjectURL(new Blob([b.data])),F=document.createElement("a");F.href=le,F.download="reporte del"+t+".xlsx",F.click(),i({type:"positive",message:"Descarga completa"}),d.value=!1,s.value=!1}).catch(b=>{i({type:"negative",message:b.data}),console.log(b),d.value=!1,s.value=!1})},N=async()=>{console.log("Sincronizando Checadas"),m.value=!0,s.value=!0;const a=c.notify({type:"ongoing",message:"Sincronizando Ult. Checadas...",position:"center"});Q.get("/zkt/Reportcomplete").then(t=>{a({type:"positive",message:"Proseso terminado"}),m.value=!1,s.value=!1,k.value.body=t.data,k.value.state=!0}).catch(t=>{a({type:"negative",message:t.data}),m.value=!1,s.value=!1})},O=async()=>{console.log("Sincronizando Justificaciones"),h.value=!0,s.value=!0;const a=c.notify({type:"ongoing",message:"Sincronizando Justificaciones...",position:"center"});Q.get("/Monday/justification").then(t=>{a({type:"positive",message:t.data}),h.value=!1,s.value=!1}).catch(t=>{a({type:"negative",message:t.data}),h.value=!1,s.value=!1})},I=async()=>{console.log("Conexion a checadores"),p.value=!0,s.value=!0;const a=c.notify({type:"ongoing",message:"Verificando conexiones...",position:"center"});Q.get("/pings").then(t=>{a({type:"positive",message:"Mostrando coexiones"}),p.value=!1,s.value=!1,r.value.body=t.data,r.value.state=!0}).catch(t=>{a({type:"negative",message:t.data}),console.log(t),p.value=!1,s.value=!1})},E=async()=>{console.log("Conexion a checadores"),x.value=!0,s.value=!0;const a=c.notify({type:"ongoing",message:"Dando de alta...",position:"center"});Q.post("/syncstaff").then(t=>{a({type:"positive",message:"Usuarios Replicados"}),x.value=!1,s.value=!1,console.log(t)}).catch(t=>{a({type:"negative",message:t.data}),console.log(t),x.value=!1,s.value=!1})};return(async()=>{console.log("obtenirnedo reporte"),Q.get("/getResourses").then(a=>{o.value.reporte=a.data.reporte,g.value.opts=a.data.sucursal,console.log(a.data),g.value.opts.push({label:"All",value:"All"})}).catch(a=>{console.log(a)})})(),(a,t)=>(v(),C(ue,{padding:""},{default:n(()=>[Ve,_("div",we,[l(A,{loading:d.value,onClick:$,color:"primary",icon:"cloud_download",label:"Descargar",style:{width:"300px"},disable:s.value},null,8,["loading","disable"]),l(A,{loading:h.value,onClick:O,color:"primary",icon:"warning",label:"Replicar Justificaciones",style:{width:"300px"},disable:s.value},null,8,["loading","disable"]),l(A,{loading:m.value,onClick:N,color:"primary",icon:"sync",label:"Replicar Ultimas Checadas",style:{width:"300px"},disable:s.value},null,8,["loading","disable"]),l(A,{loading:p.value,onClick:I,color:"primary",icon:"sensors",label:"Conexion a sucursales",style:{width:"300px"},disable:s.value},null,8,["loading","disable"]),l(A,{loading:x.value,onClick:E,color:"primary",icon:"group_add",label:"Alta colaboradores faltantes",style:{width:"300px"},disable:s.value},null,8,["loading","disable"])]),_("div",null,[l(Ce,{modelValue:g.value.val,"onUpdate:modelValue":t[0]||(t[0]=i=>g.value.val=i),inline:"",class:"q-mb-md",options:g.value.opts},null,8,["modelValue","options"]),l(he,{title:"Asistencias",rows:V.value,"row-key":"ID",flat:"",bordered:"",separator:"cell",dense:"",filter:o.value.filter,"no-data-label":"No hay nada Aun"},{top:n(()=>[l(J,{spaced:"",inset:"",vertical:"",dark:""}),Qe,l(Se),l(de,{borderless:"",dense:"",debounce:"300",color:"primary",modelValue:o.value.filter,"onUpdate:modelValue":t[1]||(t[1]=i=>o.value.filter=i)},{append:n(()=>[l(w,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","filter"])]),l(X,{modelValue:r.value.state,"onUpdate:modelValue":t[2]||(t[2]=i=>r.value.state=i)},{default:n(()=>[_("div",null,[l(W,{class:"my-card row"},{default:n(()=>[l(q,{class:"col"},{default:n(()=>[l(q,null,{default:n(()=>[Ie]),_:1}),(v(!0),B(D,null,R(r.value.body.goal,(i,b)=>(v(),C(M,{bordered:"",key:b},{default:n(()=>[z((v(),C(T,{clickable:""},{default:n(()=>[l(S,{avatar:""},{default:n(()=>[l(w,{color:"primary",name:"store"})]),_:1}),l(S,null,{default:n(()=>[L(U(i),1)]),_:2},1024)]),_:2},1024)),[[j]])]),_:2},1024))),128))]),_:1}),l(J,{spaced:"",inset:"",vertical:"",dark:""}),l(q,{class:"col"},{default:n(()=>[l(q,null,{default:n(()=>[Ae]),_:1}),(v(!0),B(D,null,R(r.value.body.fail,(i,b)=>(v(),C(M,{bordered:"",key:b},{default:n(()=>[z((v(),C(T,{clickable:""},{default:n(()=>[l(S,{avatar:""},{default:n(()=>[l(w,{color:"primary",name:"store"})]),_:1}),l(S,null,{default:n(()=>[L(U(i),1)]),_:2},1024)]),_:2},1024)),[[j]])]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]),l(X,{modelValue:k.value.state,"onUpdate:modelValue":t[3]||(t[3]=i=>k.value.state=i)},{default:n(()=>[_("div",null,[l(W,{class:"my-card row"},{default:n(()=>[l(q,{class:"col"},{default:n(()=>[l(q,null,{default:n(()=>[Be]),_:1}),(v(!0),B(D,null,R(k.value.body.goals,(i,b)=>(v(),C(M,{bordered:"",key:b},{default:n(()=>[z((v(),C(T,{clickable:""},{default:n(()=>[l(S,{avatar:""},{default:n(()=>[l(w,{color:"primary",name:"check"})]),_:1}),l(S,null,{default:n(()=>[L(U(i),1)]),_:2},1024)]),_:2},1024)),[[j]])]),_:2},1024))),128))]),_:1}),l(J,{spaced:"",inset:"",vertical:"",dark:""}),l(q,{class:"col"},{default:n(()=>[l(q,null,{default:n(()=>[Re]),_:1}),(v(!0),B(D,null,R(k.value.body.fails,(i,b)=>(v(),C(M,{bordered:"",key:b},{default:n(()=>[z((v(),C(T,{clickable:""},{default:n(()=>[l(S,{avatar:""},{default:n(()=>[l(w,{color:"primary",name:"close"})]),_:1}),l(S,null,{default:n(()=>[L(U(i),1)]),_:2},1024)]),_:2},1024)),[[j]])]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),_:1}))}};export{Pe as default};
